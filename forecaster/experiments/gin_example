# Experiment Configuration Example - Supports seed list or repeat mode

# Basic experiment settings
build.experiment_name = 'PEMS04_example'
build.module = 'experiments.forecast'
build.repeat = 3  # Only used when seed list is empty
build.data_path = 'PEMS04'
build.model_type = 'nbeats'

# Hyperparameter grid search - using seed list
build.variables_dict = {
    'nbeats.hidden_layer_units': [32, 64, 128],
    'get_optimizer.lr': [1e-3, 2e-3, 5e-3],
    'seed': [42, 123, 456]  # Fixed seed list, paths will be seed=42, seed=123, seed=456
}

# For repeat mode, set seed to empty list:
# build.variables_dict = {
#     'nbeats.hidden_layer_units': [32, 64, 128],
#     'get_optimizer.lr': [1e-3, 2e-3, 5e-3],
#     'seed': []  # Empty list enables repeat mode, paths will be repeat=0, repeat=1, repeat=2
# }

# Model configuration
nbeats.nb_blocks_per_stack = 3
nbeats.forecast_length = 12
nbeats.backcast_length = 12

# Training configuration
train.loss_name = 'mse'
train.epochs = 50

# Scheduler configuration
get_scheduler.warmup_epochs = 5

# Data loader configuration
get_data.batch_size = 64

# Checkpoint configuration
Checkpoint.patience = 7

# Dataset configuration
ColdStartForecastDataset.scale = True
ColdStartForecastDataset.horizon_len = 12
ColdStartForecastDataset.lookback_mult = 1
ColdStartForecastDataset.seen_node_ratio = 0.1

# Optimizer configuration
get_optimizer.lr = 1e-2
get_optimizer.lambda_lr = 1.
get_optimizer.weight_decay = 0.

# Other configuration
instance.save_vals = True